{{/* Card Component
     Usage: {{ partial "card.html" . }}
     Pass a Hugo page object
*/}}
<article class="card" itemscope itemtype="https://schema.org/Article">
  {{ with .Params.image }}
  <img
    class="card__image"
    src="{{ . }}"
    alt="{{ $.Title }}"
    loading="lazy"
    decoding="async"
    itemprop="image"
  >
  {{ else }}
  {{ with .Params.heroImage }}
  <img
    class="card__image"
    src="{{ . }}"
    alt="{{ $.Title }}"
    loading="lazy"
    decoding="async"
    itemprop="image"
  >
  {{ end }}
  {{ end }}

  <div class="card__body">
    {{ with .Params.tags }}
    <div class="tags mb-2">
      {{ range first 3 . }}
      <span class="tag tag--primary">{{ . }}</span>
      {{ end }}
    </div>
    {{ end }}

    <h3 class="card__title" itemprop="headline">
      <a href="{{ .Permalink }}" itemprop="url">{{ .Title }}</a>
    </h3>

    {{ if .Params.country }}
    <div class="card__meta">
      <span>{{ .Params.country }}</span>
      {{ with .Params.region }} &bull; <span>{{ . }}</span>{{ end }}
    </div>
    {{ else if .Params.city }}
    <div class="card__meta">
      <span>{{ .Params.city }}</span>
      {{ with .Params.country }} &bull; <span>{{ . }}</span>{{ end }}
    </div>
    {{ end }}

    {{ with .Summary }}
    <p class="card__excerpt" itemprop="description">{{ . | plainify | truncate 120 }}</p>
    {{ end }}

    {{ with .Params.safetyLevel }}
    {{ partial "safety-badge.html" (dict "level" . "text" (. | title)) }}
    {{ end }}
  </div>
</article>
